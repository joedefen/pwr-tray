# pwr-tray DE commands configuration
#
# Three-layer merge: defaults -> session_type -> desktop
# Later layers override earlier ones.
#
# To customize, copy this file to:
#   ~/.config/pwr-tray/my-commands.yaml
# and edit that copy. The default commands.yaml is always
# overwritten on startup; my-commands.yaml is never touched.

defaults:
  wallpaper: ~/.config/pwr-tray/lockpaper.png
  suspend: systemctl suspend
  poweroff: systemctl poweroff
  reboot: systemctl reboot
  logoff: ""
  monitors_off: ""
  monitors_on: ""
  locker: loginctl lock-session
  get_idle_ms: ""
  reset_idle: ""
  reload_wm: ""
  restart_wm: ""
  must_haves: [systemctl]

session_types:
  x11:
    idle_method: poll
    get_idle_ms: xprintidle
    reset_idle: xset s reset
    monitors_off: "sleep 1.0; exec xset dpms force off"
    must_haves: [xprintidle, xset]
  wayland:
    idle_method: swayidle
    must_haves: [swayidle]

desktops:
  i3-x11:
    locker: i3lock -t -i {{wallpaper}} --ignore-empty-password --show-failed-attempts
    logoff: i3-msg exit
    reload_wm: i3-msg reload
    restart_wm: i3-msg restart
    must_haves: [i3-msg, i3lock]

  sway-wayland:
    locker: swaylock -i {{wallpaper}} --ignore-empty-password --show-failed-attempts
    monitors_off: 'swaymsg "output * dpms off"'
    monitors_on: 'swaymsg "output * dpms on"'
    logoff: swaymsg exit
    reload_wm: swaymsg reload
    must_haves: [swaymsg, swaylock]

  hyprland-wayland:
    locker: swaylock -i {{wallpaper}} --ignore-empty-password --show-failed-attempts
    monitors_off: hyprctl dispatch dpms off
    monitors_on: hyprctl dispatch dpms on
    logoff: hyprctl dispatch exit
    reload_wm: hyprctl reload
    must_haves: [hyprctl, swaylock]

  kde-x11:
    logoff: qdbus org.kde.Shutdown /Shutdown org.kde.Shutdown.logout
    restart_wm: killall plasmashell && kstart5 plasmashell && sleep 3 && pwr-tray
    must_haves: [loginctl]

  kde-wayland:
    logoff: pkill kwin
    # For a cleaner KDE Wayland logout, try one of:
    #   logoff: qdbus org.kde.Shutdown /Shutdown org.kde.Shutdown.logout
    #   logoff: loginctl terminate-session $XDG_SESSION_ID
    must_haves: [loginctl]

  xfce-x11:
    logoff: xfce4-session-logout --logout
    reload_wm: xfce4-panel -r
    must_haves: [xfce4-session-logout]

  cinnamon-x11:
    logoff: cinnamon-session-quit --logout
    must_haves: [cinnamon-session-quit]

  mate-x11:
    logoff: mate-session-save --logout
    must_haves: [mate-session-save]

  lxqt-x11:
    logoff: lxqt-leave --logout
    must_haves: [lxqt-leave]
